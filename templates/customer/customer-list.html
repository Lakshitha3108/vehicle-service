{%extends 'base.html'%}
{%load check_roles%}

{%block section%}
<main class="h-full pb-16 overflow-y-auto">
  <div class="container grid px-6 mx-auto">

    <div class="flex items-center justify-between my-4 ">
      <h4 class="mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300 my-6">
        Customers
      </h4>

      {%check_user_role request 'Admin' as allow%}
      {%if allow%}
      <div>
        <a href="{% url 'customer-register' %}">
          <button class="px-5 py-3 font-medium leading-5 text-black bg-purple-600 rounded-lg hover:bg-purple-700">
            Add Customer
          </button>
        </a>
      </div>
      {%endif%}
    </div>
    
    <div class="w-full overflow-hidden rounded-lg shadow-xs">
      <div class="w-full overflow-x-auto">
        <table class="w-full whitespace-no-wrap">
          <thead>
            <tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase bg-gray-50">
              <th class="px-4 py-3">Name</th>
              <th class="px-4 py-3">Email</th>
              <th class="px-4 py-3">Contact</th>
              <th class="px-4 py-3">Address</th>
              <th class="px-4 py-3">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y dark:divide-gray-700">
            {%for customer in customers%}
            <tr class="text-gray-700">
              <td class="px-4 py-3">
                {{ customer.profile.first_name }} {{ customer.profile.last_name }}
              </td>
              <td class="px-4 py-3">{{ customer.profile.email }}</td>
              <td class="px-4 py-3">{{ customer.contact_number }}</td>
              <td class="px-4 py-3">{{ customer.address }}</td>
              <td class="px-6 py-4 whitespace-nowrap flex space-x-2">
                <!-- View Button -->
                <a href="{% url 'customer-detail' customer.uuid %}" class="btn btn-sm btn-outline-primary">
                    <i class="fas fa-eye"></i>
                </a>
                
                <!-- Edit Button -->
                <a href="{% url 'customer-update' customer.uuid %}" class="btn btn-sm btn-outline-warning">
                    <i class="fas fa-edit"></i>
                </a>
                
                <!-- Delete Button -->
                <a href="{% url 'customer-delete' customer.uuid %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this customer?');">
                    <i class="fas fa-trash-alt"></i>
                </a>
            </td>
            
              
                  
              
             </tr> 
            {%empty%}
            <tr>
              <td colspan="5" class="px-4 py-3 text-center text-gray-500">No customers found.</td>
            </tr>
            {%endfor%}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>
{%endblock%}
